<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Gubby Clicker</title>

<style>
:root{
  --bg1:#ffffff;
  --bg2:#f9fbff;
  --accent:#6bc8ff;
  --accent2:#89ddff;
  --muted:#7a7f88;
  --glass:rgba(255,255,255,0.8);
}
*{box-sizing:border-box;font-family: 'Segoe UI', system-ui, sans-serif;}
html,body{
  margin:0;
  height:100%;
  background:linear-gradient(180deg,var(--bg1),var(--bg2));
  display:flex;align-items:center;justify-content:center;
}
.wrap{
  width:1100px;
  background:var(--glass);
  border-radius:16px;
  box-shadow:0 20px 60px rgba(0,0,0,0.08);
  display:grid;
  grid-template-rows:auto 1fr;
  overflow:hidden;
  animation:fadeIn .4s ease;
}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:none;}}
header{
  background:white;
  padding:14px 20px;
  display:flex;align-items:center;justify-content:space-between;
  border-bottom:1px solid rgba(0,0,0,0.05);
}
.header-left{display:flex;align-items:center;gap:10px;}
.logo{
  width:44px;height:44px;border-radius:12px;
  background:linear-gradient(135deg,var(--accent),var(--accent2));
  display:flex;align-items:center;justify-content:center;
  font-weight:bold;color:white;font-size:20px;
  box-shadow:0 6px 18px rgba(0,0,0,0.12);
}
h1{font-size:20px;margin:0;}
.small-muted{font-size:13px;color:var(--muted);}
.top-controls{display:flex;gap:8px;align-items:center;}
button{
  padding:10px 14px;
  border-radius:10px;
  border:none;
  font-weight:bold;
  cursor:pointer;
  transition:all .15s ease;
}
button.primary{background:var(--accent);color:white;}
button.secondary{background:white;color:var(--accent);border:1px solid rgba(0,0,0,0.1);}
button:hover{transform:translateY(-2px);box-shadow:0 6px 14px rgba(0,0,0,0.12);}

.main{
  display:grid;
  grid-template-columns:1fr 360px;
  gap:16px;
  padding:16px;
}
.game-card{
  background:white;
  border-radius:12px;
  padding:14px;
  box-shadow:inset 0 -8px 20px rgba(0,0,0,0.02);
  display:flex;flex-direction:column;align-items:center;gap:12px;
}
.house{
  width:620px;height:460px;
  background:linear-gradient(180deg,#fff,#f0f8ff);
  border-radius:12px;
  position:relative;overflow:hidden;
  border:1px solid rgba(0,0,0,0.05);
}
.gubby-sprite{position:absolute;transform:translate(-50%,-50%);width:110px;height:110px;pointer-events:auto;z-index:10;}
.gubby-float{animation:floaty 3s ease-in-out infinite;}
@keyframes floaty{0%,100%{transform:translate(-50%,-50%) translateY(0);}50%{transform:translate(-50%,-50%) translateY(-6px);}}

.hud{display:flex;gap:12px;}
.stat{
  flex:1;
  background:white;
  border-radius:10px;
  padding:8px;
  border:1px solid rgba(0,0,0,0.05);
  text-align:center;
}
.stat-icon{font-size:20px;}
.stat-bar{height:8px;background:#e0e0e0;border-radius:4px;overflow:hidden;margin-top:4px;}
.stat-fill{height:100%;background:var(--accent);transition:width .3s ease;}

.controls{display:flex;gap:8px;flex-wrap:wrap;justify-content:center;}

.right-col{display:flex;flex-direction:column;gap:12px;}
.panel{
  background:white;
  border-radius:10px;
  padding:12px;
  border:1px solid rgba(0,0,0,0.05);
}
.variants-list{display:flex;flex-direction:column;gap:6px;}
.variant-item{padding:6px;border-radius:8px;border:1px solid rgba(0,0,0,0.05);cursor:pointer;}
.variant-item:hover{background:rgba(0,0,0,0.03);}

.backpack{display:flex;gap:8px;}
.bp-item{display:flex;flex-direction:column;align-items:center;}
.bp-qty{font-weight:bold;}

.modal-backdrop{
  position:fixed;inset:0;background:rgba(0,0,0,0.45);
  display:none;align-items:center;justify-content:center;
  z-index:200;
}
.modal{
  background:white;border-radius:12px;padding:20px;
  box-shadow:0 20px 50px rgba(0,0,0,0.3);
  max-width:500px;width:90%;
}

</style>
</head>
<body>
<div class="wrap">
<header>
  <div class="header-left">
    <div class="logo">G</div>
    <div><h1>Gubby Clicker</h1><div class="small-muted">P2P Multiplayer Fun</div></div>
  </div>
  <div class="top-controls">
    <div class="backpack">
      <div class="bp-item">üçî<div class="bp-qty" id="bpFood">0</div></div>
      <div class="bp-item">üíß<div class="bp-qty" id="bpWater">0</div></div>
      <div class="bp-item">ü•§<div class="bp-qty" id="bpCola">0</div></div>
    </div>
    <div id="authArea" class="small-muted">Not signed in</div>
    <button id="googleSignIn" class="secondary">Sign in</button>
    <button id="shopBtn" class="secondary">Shop</button>
  </div>
</header>

<div class="main">
  <div class="game-card">
    <div class="house" id="house">
      <img id="gubbySprite" class="gubby-sprite gubby-float" src="sprites/variants/default.png" style="left:260px;top:210px">
    </div>
    <div class="hud">
      <div class="stat">
        <div class="stat-icon">üçî</div>
        <div class="stat-bar"><div id="hungerFill" class="stat-fill"></div></div>
      </div>
      <div class="stat">
        <div class="stat-icon">üíß</div>
        <div class="stat-bar"><div id="thirstFill" class="stat-fill"></div></div>
      </div>
      <div class="stat">
        <div class="stat-icon">‚ö°</div>
        <div class="stat-bar"><div id="energyFill" class="stat-fill"></div></div>
      </div>
    </div>
    <div class="controls">
      <button id="feedBtn" class="primary">Feed</button>
      <button id="waterBtn" class="secondary">Give Water</button>
      <button id="colaBtn" class="secondary">Bloxy Cola</button>
      <button id="playBtn" class="secondary">Play</button>
      <button id="inviteBtn" class="primary">Invite Friend</button>
      <button id="joinBtn" class="secondary">Join Game</button>
    </div>
  </div>

  <div class="right-col">
    <div class="panel">
      <strong>Connection</strong>
      <div class="small-muted" id="connectionStatus">Not connected</div>
    </div>
    <div class="panel">
      <strong>Account</strong>
      <div id="accountInfo" class="small-muted">‚Äî</div>
    </div>
    <div class="panel">
      <strong>Variants</strong>
      <div id="variantsList" class="variants-list"></div>
    </div>
    <div class="panel admin-panel" id="adminPanel" style="display:none">
      <strong>Admin</strong>
      <div>
        <label>Variant ID</label><input id="variantId" type="text"><br>
        <label>Display Name</label><input id="variantDisplayName" type="text"><br>
        <label>File name</label><input id="variantFile" type="text"><br>
        <img id="variantPreview" style="max-width:100px;margin-top:6px;"><br>
        <label>Price</label><input id="variantPrice" type="number" value="500"><br>
        <input id="variantAttrs" type="hidden">
        <button id="openAttrPicker" class="secondary">Choose Attributes</button><br><br>
        <button id="createVariantBtn" class="primary">Create Variant</button>
      </div>
    </div>
  </div>
</div>
</div>

<!-- Join Modal -->
<div class="modal-backdrop" id="joinModal">
  <div class="modal">
    <h3>Join Game</h3>
    <input id="joinCodeInput" placeholder="Paste invite code">
    <button id="joinConfirm" class="primary">Join</button>
    <button id="closeJoinModal" class="secondary">Cancel</button>
  </div>
</div>

<!-- Attribute Picker Modal -->
<div class="modal-backdrop" id="attrModal">
  <div class="modal">
    <h3>Choose Attributes</h3>
    <div>
      <label><input type="checkbox" data-attr="clickMultiplier"> Click Multiplier</label><input type="number" step="0.1" value="1.5"><br>
      <label><input type="checkbox" data-attr="speed"> Speed</label><input type="number" step="0.1" value="1"><br>
      <label><input type="checkbox" data-attr="hungerDecay"> Hunger Decay Rate</label><input type="number" step="0.1" value="1"><br>
    </div>
    <button id="applyAttr" class="primary">Apply</button>
    <button id="closeAttrModal" class="secondary">Cancel</button>
  </div>
</div>

<script>
// TODO: integrate existing JS game logic here from your original file, keeping function names so nothing breaks.
// Changes needed:
// - Replace old P2P UI event handlers with inviteBtn and joinBtn events.
// - Hook up attribute picker modal to fill #variantAttrs.
// - Update progress bars: hungerFill.style.width = state.hunger + "%", etc.
// - Update sprite preview: variantPreview.src = SPRITE_BASE_PATH + filename when typing.

</script>
</body>
</html>
